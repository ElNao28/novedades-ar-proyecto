import{$ as le,$a as Ie,A as M,Aa as R,B as oe,Ba as me,C as f,D as c,Da as de,Ea as d,F as K,Fa as ue,G as s,Ga as he,H as n,Ha as fe,I as v,J as x,K as C,L as p,M as u,Ma as _e,O as re,Oa as ve,P as ne,Pa as Ce,Q as ae,Qa as ge,R as z,Ra as ye,S as m,Sa as xe,T as I,Ta as P,Ua as be,W as se,Wa as A,Za as we,_a as Ee,aa as k,ba as B,e as ee,f as Q,g as S,h as te,i as O,ja as N,k as E,ka as V,l as F,la as Y,m as ie,n as U,na as T,o as g,oa as ce,p as y,qa as L,r as Z,ra as pe,w as W,x as l,y as _,z as b}from"./chunk-I4SIAQ55.js";var Oe=["captchaWrapperElem"],$=(()=>{class t{constructor(e){this.zone=e,this.scriptElemId="ngx-catpcha-script",this.windowGrecaptcha="grecaptcha",this.windowGrecaptchaEnterprise="enterprise",this.windowOnLoadCallbackProperty="ngx_captcha_onload_callback",this.windowOnLoadEnterpriseCallbackProperty="ngx_captcha_onload_enterprise_callback",this.globalDomain="recaptcha.net",this.defaultDomain="google.com",this.enterpriseApi="enterprise.js",this.defaultApi="api.js"}registerCaptchaScript(e,r,o,a){if(this.grecaptchaScriptLoaded(e.useEnterprise)){e.useEnterprise?this.zone.run(()=>{o(window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise])}):this.zone.run(()=>{o(window[this.windowGrecaptcha])});return}e.useEnterprise?window[this.getCallbackName(!0)]=()=>this.zone.run(o.bind(this,window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise])):window[this.getCallbackName(!1)]=()=>this.zone.run(o.bind(this,window[this.windowGrecaptcha]));let h=document.createElement("script");h.id=this.scriptElemId,h.innerHTML="",h.src=this.getCaptchaScriptUrl(e,r,a),h.async=!0,h.defer=!0,document.getElementsByTagName("head")[0].appendChild(h)}cleanup(){let e=document.getElementById(this.scriptElemId);e&&e.remove(),window[this.getCallbackName()]=void 0,window[this.windowGrecaptcha]=void 0}grecaptchaScriptLoaded(e){return!window[this.getCallbackName(e)]||!window[this.windowGrecaptcha]?!1:e&&window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise]?!0:!!window[this.windowGrecaptcha].execute}getCallbackName(e){return e?this.windowOnLoadEnterpriseCallbackProperty:this.windowOnLoadCallbackProperty}getLanguageParam(e){return e?`&hl=${e}`:""}getCaptchaScriptUrl(e,r,o){let a=e.useGlobalDomain?this.globalDomain:this.defaultDomain,h=e.useEnterprise?this.enterpriseApi:this.defaultApi,w=this.getCallbackName(e.useEnterprise);return`https://www.${a}/recaptcha/${h}?onload=${w}&render=${r}${this.getLanguageParam(o)}`}}return t.\u0275fac=function(e){return new(e||t)(O(M))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Be=(()=>{class t{constructor(e,r,o,a){this.renderer=e,this.zone=r,this.injector=o,this.scriptService=a,this.captchaElemPrefix="ngx_captcha_id_",this.setupCaptcha=!0,this.useGlobalDomain=!1,this.useEnterprise=!1,this.type="image",this.tabIndex=0,this.success=new b,this.load=new b,this.reset=new b,this.ready=new b,this.error=new b,this.expire=new b,this.setupAfterLoad=!1,this.resetCaptchaAfterSuccess=!1,this.onChange=h=>{},this.onTouched=h=>{},this.isLoaded=!1}ngAfterViewInit(){this.control=this.injector.get(ue,void 0,te.Optional)?.control}ngAfterViewChecked(){this.setupCaptcha&&(this.setupCaptcha=!1,this.setupComponent())}ngOnChanges(e){e&&e.hl&&!e.hl.firstChange&&e.hl.currentValue!==e.hl.previousValue&&this.scriptService.cleanup(),e&&e.useGlobalDomain&&!e.useGlobalDomain.firstChange&&e.useGlobalDomain.currentValue!==e.useGlobalDomain.previousValue&&this.scriptService.cleanup(),this.setupCaptcha=!0}getResponse(){return this.reCaptchaApi.getResponse(this.captchaId)}getCaptchaId(){return this.captchaId}resetCaptcha(){this.zone.run(()=>{this.reCaptchaApi.reset(),this.onChange(void 0),this.onTouched(void 0),this.reset.next()})}getCurrentResponse(){return this.currentResponse}reloadCaptcha(){this.setupComponent()}ensureCaptchaElem(e){let r=document.getElementById(e);if(!r)throw Error(`Captcha element with id '${e}' was not found`);this.captchaElem=r}renderReCaptcha(){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.captchaId=this.reCaptchaApi.render(this.captchaElemId,this.getCaptchaProperties()),this.ready.next()},0)})}handleCallback(e){this.currentResponse=e,this.success.next(e),this.zone.run(()=>{this.onChange(e),this.onTouched(e)}),this.resetCaptchaAfterSuccess&&this.resetCaptcha()}getPseudoUniqueNumber(){return new Date().getUTCMilliseconds()+Math.floor(Math.random()*9999)}setupComponent(){this.captchaSpecificSetup(),this.createAndSetCaptchaElem(),this.scriptService.registerCaptchaScript({useGlobalDomain:this.useGlobalDomain,useEnterprise:this.useEnterprise},"explicit",e=>{this.onloadCallback(e)},this.hl)}onloadCallback(e){if(this.reCaptchaApi=e,!this.reCaptchaApi)throw Error("ReCaptcha Api was not initialized correctly");this.isLoaded=!0,this.load.next(),this.renderReCaptcha(),this.setupAfterLoad&&(this.setupAfterLoad=!1,this.setupComponent())}generateNewElemId(){return this.captchaElemPrefix+this.getPseudoUniqueNumber()}createAndSetCaptchaElem(){if(this.captchaElemId=this.generateNewElemId(),!this.captchaElemId)throw Error("Captcha elem Id is not set");if(!this.captchaWrapperElem)throw Error("Captcha DOM element is not initialized");this.captchaWrapperElem.nativeElement.innerHTML="";let e=this.renderer.createElement("div");e.id=this.captchaElemId,this.renderer.appendChild(this.captchaWrapperElem.nativeElement,e),setTimeout(()=>{this.captchaElemId&&this.ensureCaptchaElem(this.captchaElemId)},0)}writeValue(e){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}handleErrorCallback(){this.zone.run(()=>{this.onChange(void 0),this.onTouched(void 0)}),this.error.next()}handleExpireCallback(){this.expire.next(),this.resetCaptcha()}}return t.\u0275fac=function(e){return new(e||t)(_(W),_(M),_(Z),_($))},t.\u0275dir=ie({type:t,inputs:{siteKey:"siteKey",useGlobalDomain:"useGlobalDomain",useEnterprise:"useEnterprise",type:"type",hl:"hl",tabIndex:"tabIndex"},outputs:{success:"success",load:"load",reset:"reset",ready:"ready",error:"error",expire:"expire"},features:[U]}),t})(),Se=function(t){return t[t.InvisibleReCaptcha=0]="InvisibleReCaptcha",t[t.ReCaptcha2=1]="ReCaptcha2",t}(Se||{});var q=(()=>{class t extends Be{constructor(e,r,o,a){super(e,r,o,a),this.renderer=e,this.zone=r,this.injector=o,this.scriptService=a,this.windowOnErrorCallbackProperty="ngx_captcha_error_callback",this.windowOnExpireCallbackProperty="ngx_captcha_expire_callback",this.theme="light",this.size="normal",this.recaptchaType=Se.ReCaptcha2}ngOnChanges(e){super.ngOnChanges(e)}ngOnDestroy(){window[this.windowOnErrorCallbackProperty]={},window[this.windowOnExpireCallbackProperty]={}}captchaSpecificSetup(){this.registerCallbacks()}getCaptchaProperties(){return{sitekey:this.siteKey,callback:e=>this.zone.run(()=>this.handleCallback(e)),"expired-callback":()=>this.zone.run(()=>this.handleExpireCallback()),"error-callback":()=>this.zone.run(()=>this.handleErrorCallback()),theme:this.theme,type:this.type,size:this.size,tabindex:this.tabIndex}}registerCallbacks(){window[this.windowOnErrorCallbackProperty]=super.handleErrorCallback.bind(this),window[this.windowOnExpireCallbackProperty]=super.handleExpireCallback.bind(this)}}return t.\u0275fac=function(e){return new(e||t)(_(W),_(M),_(Z),_($))},t.\u0275cmp=E({type:t,selectors:[["ngx-recaptcha2"]],viewQuery:function(e,r){if(e&1&&re(Oe,5),e&2){let o;ne(o=ae())&&(r.captchaWrapperElem=o.first)}},inputs:{theme:"theme",size:"size"},features:[se([{provide:me,useExisting:ee(()=>t),multi:!0}]),oe,U],decls:2,vars:0,consts:[["captchaWrapperElem",""]],template:function(e,r){e&1&&v(0,"div",null,0)},encapsulation:2}),t})(),$e=(()=>{class t{constructor(e,r){this.scriptService=e,this.zone=r}execute(e,r,o,a,h){this.executeAsPromise(e,r,a).then(o).catch(w=>h?h(w):console.error(w))}executeAsPromise(e,r,o){return new Promise((a,h)=>{let w=o||{},Me=ze=>{this.zone.runOutsideAngular(()=>{try{ze.execute(e,{action:r}).then(G=>this.zone.run(()=>a(G)))}catch(G){h(G)}})};this.scriptService.registerCaptchaScript(w,e,Me)})}}return t.\u0275fac=function(e){return new(e||t)(O($),O(M))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=F({type:t}),t.\u0275inj=S({providers:[$,$e],imports:[B]}),t})();function qe(t,i){if(t&1){let e=x();s(0,"input",10),C("change",function(o){g(e);let a=p(3);return y(a.emitChangeFile(o))}),n()}if(t&2){let e=p().$implicit;u("formControlName",e.formControlName),u("type",e.type)}}function Ge(t,i){t&1&&(s(0,"h6"),m(1,"Crea una contrase\xF1a"),n())}function Qe(t,i){t&1&&(v(0,"p-divider"),s(1,"p",14),m(2,"Sugerencias"),n(),s(3,"ul",15)(4,"li"),m(5,"Una mayuscula"),n(),s(6,"li"),m(7,"Una minuscula"),n(),s(8,"li"),m(9,"Al menos un numero"),n(),s(10,"li"),m(11,"Un caracter especial"),n(),s(12,"li"),m(13,"Minimo 8 caracteres"),n()())}function Ue(t,i){if(t&1&&(s(0,"p-password",11),f(1,Ge,2,0,"ng-template",12)(2,Qe,14,0,"ng-template",13),n()),t&2){let e=p().$implicit;u("formControlName",e.formControlName),c("toggleMask",!0)("promptLabel","Ingresa una contrase\xF1a")("weakLabel","Debil")("mediumLabel","Medio")("strongLabel","Fuerte")}}function Ze(t,i){if(t&1&&v(0,"p-password",16),t&2){let e=p().$implicit;u("formControlName",e.formControlName),c("toggleMask",!0)("feedback",!1)}}function We(t,i){if(t&1&&(s(0,"option",20),m(1),n()),t&2){let e=i.$implicit;u("value",e.option),l(),I(e.option)}}function Ke(t,i){if(t&1&&(s(0,"select",17)(1,"option",18),m(2,"Seleccione una opcion"),n(),f(3,We,2,2,"option",19),n()),t&2){let e=p().$implicit;u("name",e.formControlName),u("id",e.formControlName),u("formControlName",e.formControlName),l(3),c("ngForOf",e.typeSelect)}}function Ye(t,i){if(t&1&&(s(0,"option",20),m(1),n()),t&2){let e=i.$implicit;u("value",e),l(),I(e)}}function Je(t,i){if(t&1){let e=x();s(0,"select",21,22),C("click",function(){g(e);let o=z(1),a=p(3);return y(a.emitEstado(o.value))}),s(2,"option",18),m(3,"Seleccione una opcion"),n(),f(4,Ye,2,2,"option",19),n()}if(t&2){let e=p().$implicit,r=p(2);u("name",e.formControlName),u("id",e.formControlName),u("formControlName",e.formControlName),l(4),c("ngForOf",r.estados.response.estado)}}function He(t,i){if(t&1&&(s(0,"option",20),m(1),n()),t&2){let e=i.$implicit;u("value",e),l(),I(e)}}function Xe(t,i){if(t&1){let e=x();s(0,"select",21,22),C("click",function(){g(e);let o=z(1),a=p(3);return y(a.emitMunicipio(o.value))}),s(2,"option",18),m(3,"Seleccione una opcion"),n(),f(4,He,2,2,"option",19),n()}if(t&2){let e=p().$implicit,r=p(2);u("name",e.formControlName),u("id",e.formControlName),u("formControlName",e.formControlName),l(4),c("ngForOf",r.municipios.response.municipios)}}function et(t,i){if(t&1&&(s(0,"option",20),m(1),n()),t&2){let e=i.$implicit;u("value",e),l(),I(e)}}function tt(t,i){if(t&1){let e=x();s(0,"select",21,22),C("click",function(){g(e);let o=z(1),a=p(3);return y(a.emitCp(o.value))}),s(2,"option",18),m(3,"Seleccione una opcion"),n(),s(4,"option",23),m(5,"92143"),n(),f(6,et,2,2,"option",19),n()}if(t&2){let e=p().$implicit,r=p(2);u("name",e.formControlName),u("id",e.formControlName),u("formControlName",e.formControlName),l(6),c("ngForOf",r.cp.response.cp)}}function it(t,i){if(t&1&&(s(0,"option",20),m(1),n()),t&2){let e=i.$implicit;u("value",e),l(),I(e)}}function ot(t,i){if(t&1){let e=x();s(0,"select",21,22),C("click",function(){g(e);let o=z(1),a=p(3);return y(a.emitColonia(o.value))}),s(2,"option",18),m(3,"Seleccione una opcion"),n(),f(4,it,2,2,"option",19),n()}if(t&2){let e=p().$implicit,r=p(2);u("name",e.formControlName),u("id",e.formControlName),u("formControlName",e.formControlName),l(4),c("ngForOf",r.colonias.response.colonia)}}function rt(t,i){if(t&1&&(s(0,"span",24),m(1),n()),t&2){let e=p().$implicit,r=p(2);l(),I(r.getFieldError(e.formControlName))}}function nt(t,i){if(t&1&&(s(0,"div")(1,"label",3),m(2),n(),v(3,"br"),f(4,qe,1,2,"input",4)(5,Ue,3,6,"p-password",5)(6,Ze,1,3,"p-password",6)(7,Ke,4,4,"select",7)(8,Je,5,4,"select",8)(9,Xe,5,4,"select",8)(10,tt,7,4,"select",8)(11,ot,5,4,"select",8),v(12,"br"),f(13,rt,2,1,"span",9),n()),t&2){let e=i.$implicit,r=p(2);l(),u("for",e.formControlName),l(),I(e.label),l(2),c("ngIf",e.type!="select"&&e.type!="password"),l(),c("ngIf",e.type==="password"&&e.styles!=="login"),l(),c("ngIf",e.type==="password"&&e.styles==="login"),l(),c("ngIf",e.type==="select"&&e.formControlName!="estado"&&e.formControlName!="municipio"&&e.formControlName!="cp"&&e.formControlName!="colonia"),l(),c("ngIf",e.type==="select"&&e.formControlName==="estado"),l(),c("ngIf",e.type==="select"&&e.formControlName==="municipio"),l(),c("ngIf",e.type==="select"&&e.formControlName==="cp"),l(),c("ngIf",e.type==="select"&&e.formControlName==="colonia"),l(2),c("ngIf",r.isValidField(e.formControlName))}}function at(t,i){if(t&1&&(s(0,"div"),f(1,nt,14,11,"div",2),n()),t&2){let e=p();K("grid ",e.styles," gap-4"),l(),c("ngForOf",e.datosForm)}}function st(t,i){if(t&1&&v(0,"input",28),t&2){let e=p().$implicit;u("formControlName",e.formControlName),u("type",e.type)}}function lt(t,i){t&1&&(s(0,"h6"),m(1,"Crea una contrase\xF1a"),n())}function ct(t,i){t&1&&(v(0,"p-divider"),s(1,"p",14),m(2,"Sugerencias"),n(),s(3,"ul",15)(4,"li"),m(5,"Una mayuscula"),n(),s(6,"li"),m(7,"Una minuscula"),n(),s(8,"li"),m(9,"Al menos un numero"),n(),s(10,"li"),m(11,"Un caracter especial"),n(),s(12,"li"),m(13,"Minimo 8 caracteres"),n()())}function pt(t,i){if(t&1&&(s(0,"p-password",29),f(1,lt,2,0,"ng-template",12)(2,ct,14,0,"ng-template",13),n()),t&2){let e=p().$implicit;u("formControlName",e.formControlName),c("toggleMask",!0)("promptLabel","Ingresa una contrase\xF1a")("weakLabel","Debil")("mediumLabel","Medio")("strongLabel","Fuerte")}}function mt(t,i){if(t&1&&(s(0,"option",20),m(1),n()),t&2){let e=i.$implicit;u("value",e.value),l(),I(e.option)}}function dt(t,i){if(t&1&&(s(0,"select",17)(1,"option",18),m(2,"Seleccione una opcion"),n(),f(3,mt,2,2,"option",19),n()),t&2){let e=p().$implicit;u("name",e.formControlName),u("id",e.formControlName),u("formControlName",e.formControlName),l(3),c("ngForOf",e.typeSelect)}}function ut(t,i){t&1&&(s(0,"span"),m(1,"Campo Invalido"),n())}function ht(t,i){if(t&1&&(s(0,"div")(1,"label",3),m(2),n(),v(3,"br"),f(4,st,1,2,"input",25)(5,pt,3,6,"p-password",26)(6,dt,4,4,"select",7),v(7,"br"),f(8,ut,2,0,"span",27),n()),t&2){let e=i.$implicit,r=p(2);l(),u("for",e.formControlName),l(),I(e.label),l(2),c("ngIf",e.type!="select"&&e.type!="password"),l(),c("ngIf",e.type==="password"),l(),c("ngIf",e.type==="select"),l(2),c("ngIf",r.isValidField(e.formControlName))}}function ft(t,i){if(t&1&&(s(0,"div"),f(1,ht,9,6,"div",2),n()),t&2){let e=p();K("grid ",e.styles," gap-4"),l(),c("ngForOf",e.datosFormDos)}}var j=(()=>{let i=class i{constructor(){this.formValue=!0,this.estados={error:!1,code_error:0,error_message:null,response:{estado:""}},this.municipios={error:!1,code_error:0,error_message:null,response:{municipios:""}},this.cp={error:!1,code_error:0,error_message:null,response:{cp:""}},this.colonias={error:!1,code_error:0,error_message:null,response:{colonia:""}},this.styles="",this.estadoSelect=new b,this.municipioSelect=new b,this.cpSelect=new b,this.coloniaSelect=new b,this.onChangeFile=new b}emitEstado(r){this.estadoSelect.emit(r)}emitMunicipio(r){this.municipioSelect.emit(r)}emitCp(r){this.cpSelect.emit(r)}emitColonia(r){this.coloniaSelect.emit(r)}emitChangeFile(r){this.onChangeFile.emit(r)}isValidField(r){return this.dataForm.controls[r].errors&&this.dataForm.controls[r].touched}getFieldError(r){if(!this.dataForm.controls[r])return null;let o=this.dataForm.controls[r].errors||{};for(let a of Object.keys(o))switch(a){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo ${o.minlength.requiredLength} caracters.`}return null}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=E({type:i,selectors:[["app-layout-form"]],inputs:{datosForm:"datosForm",datosFormDos:"datosFormDos",dataForm:"dataForm",formValue:"formValue",estados:"estados",municipios:"municipios",cp:"cp",colonias:"colonias",styles:"styles"},outputs:{estadoSelect:"estadoSelect",municipioSelect:"municipioSelect",cpSelect:"cpSelect",coloniaSelect:"coloniaSelect",onChangeFile:"onChangeFile"},decls:3,vars:3,consts:[["enctype","multipart/form-data",3,"formGroup"],[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"for"],["class","rounded-md w-full","accept","image/*",3,"formControlName","type","change",4,"ngIf"],[3,"formControlName","toggleMask","promptLabel","weakLabel","mediumLabel","strongLabel",4,"ngIf"],[3,"formControlName","toggleMask","feedback",4,"ngIf"],["class","rounded-md w-full",3,"name","id","formControlName",4,"ngIf"],["class","rounded-md w-full",3,"name","id","formControlName","click",4,"ngIf"],["class","msj",4,"ngIf"],["accept","image/*",1,"rounded-md","w-full",3,"formControlName","type","change"],[3,"formControlName","toggleMask","promptLabel","weakLabel","mediumLabel","strongLabel"],["pTemplate","header"],["pTemplate","footer"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"],[3,"formControlName","toggleMask","feedback"],[1,"rounded-md","w-full",3,"name","id","formControlName"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"rounded-md","w-full",3,"name","id","formControlName","click"],["selectOption",""],["value","92143"],[1,"msj"],["class","rounded-md w-full",3,"formControlName","type",4,"ngIf"],[3,"toggleMask","formControlName","promptLabel","weakLabel","mediumLabel","strongLabel",4,"ngIf"],[4,"ngIf"],[1,"rounded-md","w-full",3,"formControlName","type"],[3,"toggleMask","formControlName","promptLabel","weakLabel","mediumLabel","strongLabel"]],template:function(o,a){o&1&&(s(0,"form",0),f(1,at,2,4,"div",1)(2,ft,2,4,"div",1),n()),o&2&&(c("formGroup",a.dataForm),l(),c("ngIf",a.formValue),l(),c("ngIf",!a.formValue))},dependencies:[le,k,ce,_e,ye,xe,de,ge,he,fe,we,Ee,ve,Ce],styles:[`a:hover{color:#0ff}.msj{color:red}.p-password{width:100%}.p-password input{width:100%;border-radius:.375rem}
`],encapsulation:2});let t=i;return t})();var Pe=(()=>{let i=class i{constructor(r,o,a,h){this.fb=r,this.router=o,this.loginService=a,this.messageService=h,this.fecha=new Date().toLocaleDateString(),this.datosForm=[{label:"Ingresa tu correo electronico",formControlName:"email",type:"email"},{label:"Ingresa tu contrase\xF1a",formControlName:"password",type:"password",styles:"login"}],this.estilos="w-full",this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.key="6Le_PFspAAAAANjtS-GYPRh8xjiU46szehJjNz3u",this.keyProd="6Le_PFspAAAAAFjAJ6f-wHhiaqlLLnstow9Bup-Z",this.validButton=!0,this.myForm=this.fb.group({email:["",[d.required,d.pattern(this.emailPattern)]],password:["",[d.required,d.minLength(8),d.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]).{8,}$/)]]})}ngOnInit(){console.log(this.fecha)}getData(){if(console.log("ola"),this.myForm.invalid){this.myForm.markAllAsTouched();return}this.loginService.getIp().subscribe(r=>{this.loginService.validUser({email:this.myForm.controls.email.value,password:this.myForm.controls.password.value,ip:r.ip,fecha:this.fecha}).subscribe(o=>{if(console.log(o),o.status===200)localStorage.setItem("token",o.token),this.alerts("success","Exito",'Login correcto "Bienvenido"'),setTimeout(()=>{this.router.navigate(["/inicio"])},1e3);else if(o.status===400||o.status===302)this.alerts("warn","Error al iniciar sesion","Los datos ingresados son incorrectos");else if(o.status===409)this.alerts("error","Parece que hubo un error","Numero de intentos alcanzado");else return console.log(!1,"ola")})})}handleSuccess(r){this.validButton=!1}alerts(r,o,a){this.messageService.add({severity:r,summary:o,detail:a})}};i.\u0275fac=function(o){return new(o||i)(_(P),_(N),_(R),_(T))},i.\u0275cmp=E({type:i,selectors:[["app-iniciar-sesion"]],decls:18,vars:9,consts:[[1,"flex","justify-center","my-10","mx-4"],[1,"bg-white","rounded-lg","p-10"],[1,""],[1,"text-3xl","mb-8"],[3,"styles","dataForm","datosForm"],[1,"mt-4"],["siteKey","6Le_PFspAAAAANjtS-GYPRh8xjiU46szehJjNz3u",3,"useGlobalDomain","hl","size","theme","type","success"],["captchaElem",""],[1,"mt-4","mb-1"],["pButton","",1,"px-4","py-2","mr-2","bg-pink-400","hover:bg-pink-500","border-none","rounded-md","cursor-pointer","text-white","text-sm",3,"disabled","click"],["routerLink","/crear-cuenta",1,"px-4","py-2","bg-yellow-300","hover:bg-yellow-400","border-none","rounded-md","cursor-pointer","text-white","text-sm"],["routerLink","/recuperar-password",1,"text-blue-600","hover:text-blue-800",2,"text-decoration","none"]],template:function(o,a){o&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),m(4,"Iniciar sesion"),n(),v(5,"app-layout-form",4),s(6,"div",5)(7,"ngx-recaptcha2",6,7),C("success",function(w){return a.handleSuccess(w)}),n()(),s(9,"div",8)(10,"button",9),C("click",function(){return a.getData()}),m(11,"Ingresar "),n(),s(12,"button",10),m(13," Crear una cuenta "),n(),v(14,"p-toast"),n(),s(15,"div",2)(16,"a",11),m(17,"Olvide mi contrase\xF1a"),n()()()()()),o&2&&(l(5),c("styles",a.estilos)("dataForm",a.myForm)("datosForm",a.datosForm),l(2),c("useGlobalDomain",!0)("hl","es")("size","normal")("theme","light")("type","image"),l(3),c("disabled",a.validButton))},dependencies:[V,L,A,q,j],encapsulation:2});let t=i;return t})();function _t(t,i){t&1&&(s(0,"h3",11),m(1,"Paso 1: Datos personales"),n())}function vt(t,i){t&1&&(s(0,"h3",11),m(1,"Paso 2: Datos virtuales"),n())}function Ct(t,i){t&1&&(s(0,"button",12),m(1,"Ya tengo una cuenta "),n())}function gt(t,i){if(t&1){let e=x();s(0,"button",13),C("click",function(){g(e);let o=p();return y(o.formValueChangue())}),m(1,"Anterior "),n()}}function yt(t,i){if(t&1){let e=x();s(0,"button",14),C("click",function(){g(e);let o=p();return y(o.createNewUser())}),m(1,"Crear cuenta "),n()}if(t&2){let e=p();c("disabled",e.validCreateButton())}}function xt(t,i){if(t&1){let e=x();s(0,"button",15),C("click",function(){g(e);let o=p();return y(o.formValueChangue())}),m(1,"Siguiente "),n()}if(t&2){let e=p();c("disabled",e.validBtn())}}function bt(t,i){if(t&1){let e=x();s(0,"div",16)(1,"ngx-recaptcha2",17,18),C("success",function(o){g(e);let a=p();return y(a.handleSuccess(o))})("expire",function(o){g(e);let a=p();return y(a.handleexpired(o))}),n()()}if(t&2){let e=p();l(),c("siteKey",e.key)("useGlobalDomain",!0)("size","normal")("hl","es")("theme","light")("type","image")}}var Ae=(()=>{let i=class i{constructor(r,o,a,h){this.fb=r,this.loginService=o,this.router=a,this.messageService=h,this.validButton=!0,this.formValue=!0,this.key="6Le_PFspAAAAANjtS-GYPRh8xjiU46szehJjNz3u",this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.newUser=[],this.datosForm=[{label:"Nombre",formControlName:"name",type:"text"},{label:"Primer apellido",formControlName:"lastname",type:"text"},{label:"Segundo apellido",formControlName:"motherLastname",type:"text"},{label:"Genero",formControlName:"gender",type:"select",typeSelect:[{option:"M"},{option:"F"}]},{label:"Fecha de nacimiento",formControlName:"birthdate",type:"date"}],this.datosFormDos=[{label:"Correo electronico",formControlName:"email",type:"email"},{label:"Numero de telefono",formControlName:"cellphone",type:"number"},{label:"Contrase\xF1a",formControlName:"password",type:"password"},{label:"Repita la contrase\xF1a",formControlName:"password2",type:"password"},{label:"Pregunta",formControlName:"question",type:"select",typeSelect:[{option:"\xBFNombre de su perro?",value:1},{option:"\xBFComida favortita?",value:2},{option:"\xBFPelicula favorita?",value:3},{option:"\xBFColor favorito?",value:4}]},{label:"Respuesta",formControlName:"answer",type:"text"}],this.myForm=this.fb.group({name:["",[d.required,d.minLength(3)]],lastname:["",[d.required,d.minLength(3)]],motherLastname:["",[d.required,d.minLength(3)]],gender:["",[d.required]],birthdate:["",[d.required,this.validateAge.bind(this)]],question:["",[d.required]],answer:["",[d.required,d.minLength(3)]],email:["",[d.required,d.pattern(this.emailPattern)]],cellphone:["",[d.required,d.pattern(/^\d{10}$/)]],password:["",[d.required,d.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]).{8,}$/)]],password2:["",[d.required,d.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]).{8,}$/)]]},{validators:[this.isFieldOneEqualFieldTwo("password","password2")]})}createNewUser(){console.log(this.myForm.value)}validateAge(r){let o=new Date(r.value);return new Date().getFullYear()-o.getFullYear()>=18?null:{underage:!0}}isFieldOneEqualFieldTwo(r,o){return a=>{let h=a.get(r)?.value,w=a.get(o)?.value;return h!==w?(a.get(o)?.setErrors({notEqual:!0}),{notEqual:!0}):(a.get(o)?.setErrors(null),null)}}formValueChangue(){this.formValue===!0?this.formValue=!1:this.formValue=!0,this.validButton=!0}validBtn(){return!(!this.myForm.controls.name.invalid&&!this.myForm.controls.lastname.invalid&&!this.myForm.controls.motherLastname.invalid&&!this.myForm.controls.gender.invalid&&!this.myForm.controls.birthdate.invalid)}handleSuccess(r){this.validButton=!1}handleexpired(r){this.validButton=!0}handlereset(r){this.validButton=!0}validCreateButton(){return!(this.myForm.invalid===!1&&this.validButton===!1)}};i.\u0275fac=function(o){return new(o||i)(_(P),_(R),_(N),_(T))},i.\u0275cmp=E({type:i,selectors:[["app-crear-cuenta"]],decls:14,vars:12,consts:[[1,"my-10","flex","justify-center"],[1,"md:w-3/5","bg-white","rounded-md","px-8","py-8"],[1,"text-4xl","mb-4"],["class","text-3xl  mb-4",4,"ngIf"],[3,"formValue","datosFormDos","dataForm","datosForm","styles"],[1,"mt-4","mb-4"],["routerLink","/login","class","px-4 py-2 bg-yellow-300 hover:bg-yellow-400 border-none rounded-md cursor-pointer text-white text-sm mr-2",4,"ngIf"],["class","px-4 py-2 bg-yellow-300 hover:bg-yellow-400 border-none rounded-md cursor-pointer text-white text-sm mr-2",3,"click",4,"ngIf"],["class","px-4 py-2 bg-pink-300 hover:bg-pink-400 border-none rounded-md cursor-pointer text-white text-sm","pButton","",3,"disabled","click",4,"ngIf"],["class","px-4 py-2 bg-blue-300 hover:bg-blue-400 border-none rounded-md cursor-pointer text-white text-sm","pButton","",3,"disabled","click",4,"ngIf"],["class","field col-12",4,"ngIf"],[1,"text-3xl","mb-4"],["routerLink","/login",1,"px-4","py-2","bg-yellow-300","hover:bg-yellow-400","border-none","rounded-md","cursor-pointer","text-white","text-sm","mr-2"],[1,"px-4","py-2","bg-yellow-300","hover:bg-yellow-400","border-none","rounded-md","cursor-pointer","text-white","text-sm","mr-2",3,"click"],["pButton","",1,"px-4","py-2","bg-pink-300","hover:bg-pink-400","border-none","rounded-md","cursor-pointer","text-white","text-sm",3,"disabled","click"],["pButton","",1,"px-4","py-2","bg-blue-300","hover:bg-blue-400","border-none","rounded-md","cursor-pointer","text-white","text-sm",3,"disabled","click"],[1,"field","col-12"],[1,"",3,"siteKey","useGlobalDomain","size","hl","theme","type","success","expire"],["captchaElem",""]],template:function(o,a){o&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),m(3,"Crear cuenta"),n(),f(4,_t,2,0,"h3",3)(5,vt,2,0,"h3",3),v(6,"app-layout-form",4)(7,"p-toast"),s(8,"div",5),f(9,Ct,2,0,"button",6)(10,gt,2,0,"button",7)(11,yt,2,1,"button",8)(12,xt,2,1,"button",9),n(),f(13,bt,3,6,"div",10),n()()),o&2&&(l(4),c("ngIf",a.formValue),l(),c("ngIf",!a.formValue),l(),c("formValue",a.formValue)("datosFormDos",a.datosFormDos)("dataForm",a.myForm)("datosForm",a.datosForm)("styles","md:grid-cols-2"),l(3),c("ngIf",a.formValue),l(),c("ngIf",!a.formValue),l(),c("ngIf",!a.formValue),l(),c("ngIf",a.formValue),l(),c("ngIf",!a.formValue))},dependencies:[k,V,L,A,q,j]});let t=i;return t})();function wt(t,i){if(t&1){let e=x();s(0,"p-button",9),C("click",function(){g(e);let o=p(2);return y(o.verifEmail())}),n()}if(t&2){let e=p(2);c("disabled",e.validButton())}}function Et(t,i){t&1&&v(0,"p-button",10)}function It(t,i){if(t&1&&(s(0,"div",2)(1,"h2",3),m(2,"Recuperar contrase\xF1a"),n(),v(3,"app-layout-form",4),s(4,"div",5),v(5,"p-button",6),f(6,wt,1,1,"p-button",7)(7,Et,1,0,"p-button",8),n()()),t&2){let e=p();l(3),c("styles",e.styles)("dataForm",e.formEmail)("datosForm",e.datosFormEmail),l(3),c("ngIf",e.caseBtnRec),l(),c("ngIf",!e.caseBtnRec)}}function St(t,i){if(t&1){let e=x();s(0,"div")(1,"h2",12),m(2,"Selecciona un metodo de recuperacion"),n(),s(3,"div",13)(4,"input",14),C("click",function(){g(e);let o=p(3);return y(o.chageValueBtnTypeRecover(1))}),n(),s(5,"input",15),C("click",function(){g(e);let o=p(3);return y(o.chageValueBtnTypeRecover(2))}),n()()()}}function Ft(t,i){if(t&1&&v(0,"app-layout-form",4),t&2){let e=p(5);c("styles",e.styles)("dataForm",e.formCode)("datosForm",e.datosFormToken)}}function kt(t,i){if(t&1){let e=x();s(0,"div",5)(1,"p-button",18),C("click",function(){g(e);let o=p(5);return y(o.validatedCode())}),n()()}if(t&2){let e=p(5);l(),c("disabled",e.validButtonCode())}}function Nt(t,i){if(t&1&&(s(0,"div")(1,"h2",3),m(2,"Recuperar contrase\xF1a"),n(),f(3,Ft,1,3,"app-layout-form",16)(4,kt,2,1,"div",17),n()),t&2){let e=p(4);l(3),c("ngIf",!e.validCode),l(),c("ngIf",!e.validCode)}}function Vt(t,i){if(t&1){let e=x();s(0,"app-layout-form",21),C("click",function(){g(e);let o=p(5);return y(o.verificAnswer())}),n()}if(t&2){let e=p(5);c("dataForm",e.formQuestion)("datosForm",e.datosFormQuestion)}}function Tt(t,i){if(t&1){let e=x();s(0,"button",22),C("click",function(){g(e);let o=p(5);return y(o.verificAnswer())}),n()}if(t&2){let e=p(5);c("disabled",e.formQuestion.invalid)}}function Lt(t,i){if(t&1&&(s(0,"div")(1,"h1"),m(2,"Pregunta"),n(),f(3,Vt,1,2,"app-layout-form",19)(4,Tt,1,1,"button",20),n()),t&2){let e=p(4);l(3),c("ngIf",e.answerIsValid),l(),c("ngIf",e.answerIsValid)}}function Rt(t,i){if(t&1&&(s(0,"div"),f(1,Nt,5,2,"div",11)(2,Lt,5,2,"div",11),n()),t&2){let e=p(3);l(),c("ngIf",e.typeSelect),l(),c("ngIf",!e.typeSelect)}}function Pt(t,i){if(t&1&&(s(0,"div"),f(1,St,6,0,"div",11)(2,Rt,3,2,"div",11),n()),t&2){let e=p(2);l(),c("ngIf",e.typeRecover),l(),c("ngIf",!e.typeRecover)}}function At(t,i){if(t&1){let e=x();s(0,"div"),v(1,"app-layout-form",4),s(2,"div",5)(3,"p-button",23),C("click",function(){g(e);let o=p(2);return y(o.updatePassword())}),n()()()}if(t&2){let e=p(2);l(),c("styles",e.styles)("dataForm",e.formNewPassword)("datosForm",e.datosFormPassword),l(2),c("disabled",e.validUpdate())}}function Dt(t,i){if(t&1&&(s(0,"div",2),f(1,Pt,3,2,"div",11)(2,At,4,4,"div",11),n()),t&2){let e=p();l(),c("ngIf",!e.validAllForms),l(),c("ngIf",e.validAllForms)}}var De=(()=>{let i=class i{constructor(r,o,a,h){this.fb=r,this.router=o,this.loginService=a,this.messageService=h,this.validStatus=!1,this.validCode=!1,this.validQuestion=!0,this.caseBtnRec=!0,this.typeRecover=!0,this.typeSelect=!0,this.answerIsValid=!0,this.validAllForms=!1,this.formEmail=this.fb.group({email:["",[d.required,d.email]]}),this.formCode=this.fb.group({code:["",[d.required,d.minLength(10)]]}),this.formQuestion=this.fb.group({answer:["",[d.required,d.minLength(4)]]}),this.formNewPassword=this.fb.group({password:["",[d.required,d.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]).{8,}$/)]],confirmPassword:["",[d.required,d.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]).{8,}$/)]]},{validators:[this.isFieldOneEqualFieldTwo("password","confirmPassword")]}),this.datosFormEmail=[{label:"Correo electronico",formControlName:"email",type:"email"}],this.datosFormToken=[{label:"Ingrese el codigo enviado a su correo",formControlName:"code",type:"text"}],this.datosFormQuestion=[{label:"pregunta",formControlName:"answer",type:"text"}],this.datosFormRes=[{label:"Respuesta",formControlName:"respuesta",type:"text"}],this.datosFormPassword=[{label:"Contrase\xF1a",formControlName:"password",type:"password"},{label:"Repita la contrase\xF1a",formControlName:"confirmPassword",type:"password"}],this.styles="w-full"}verifEmail(){if(this.formEmail.invalid){this.formEmail.markAllAsTouched();return}this.caseBtnRec=!1,this.checkEmail={email:this.formEmail.controls.email.value},this.loginService.verifEmail(this.checkEmail).subscribe(r=>{if(this.responseVerEmail=r,console.log(r),this.responseVerEmail.status===404)return this.caseBtnRec=!0,this.messageService.add({severity:"error",summary:"Error",detail:"No existe el correo"});r.status===202&&(this.validStatus=!0)})}chageValueBtnTypeRecover(r){switch(r){case 1:this.typeRecover=!1,this.typeSelect=!0,this.messageService.add({severity:"success",summary:"Exito",detail:"Se a enviado un codigo a su correo"}),this.dataSend={to:this.formEmail.controls.email.value},this.loginService.sendCodePassword(this.dataSend).subscribe(a=>{a.status===200&&(this.code=a.codigo,console.log(this.code))});break;case 2:console.log(this.formEmail.controls.email.value);let o=this.formEmail.controls.email.value;this.loginService.getQuestion(o).subscribe(a=>{if(console.log(a),a.status===200)switch(this.dataSend={to:this.formEmail.controls.email.value},a.response){case"perro":this.datosFormQuestion[0].label="\xBFCual es el nombre de tu perro?";break;case"comida":this.datosFormQuestion[0].label="\xBFCual es tu comida favorita?";break;case"pelicula":this.datosFormQuestion[0].label="\xBFCual es tu pelicula favorita?";break;case"color":this.datosFormQuestion[0].label="\xBFCual es tu color favorito?";break}}),this.typeRecover=!1,this.typeSelect=!1;break}}verificAnswer(){if(this.formQuestion.invalid)return;let r={email:this.formEmail.controls.email.value,anwer:this.formQuestion.controls.answer.value};this.loginService.patito(r).subscribe(o=>{if(o.status===409)return console.log("respuesta incorrecta");this.validAllForms=!0,this.answerIsValid=!1,console.log("exito")})}isFieldOneEqualFieldTwo(r,o){return a=>{let h=a.get(r)?.value,w=a.get(o)?.value;return h!==w?(a.get(o)?.setErrors({notEqual:!0}),{notEqual:!0}):(a.get(o)?.setErrors(null),null)}}validButton(){return!!this.formEmail.invalid}validatedCode(){this.code===this.formCode.controls.code.value&&(this.messageService.add({severity:"success",summary:"Exito",detail:"El codigo ingresado es correcto"}),console.log("validatedCode"),this.validAllForms=!0,this.validCode=!0)}validButtonCode(){return!!this.formCode.invalid}validUpdate(){return!!this.formNewPassword.invalid}updatePassword(){let r=new Date().toLocaleDateString();this.loginService.getIp().subscribe(o=>{let a={password:this.formNewPassword.controls.password.value,ip:o.ip,fecha:r};this.loginService.updatePassword(this.dataSend.to,a).subscribe(h=>{h.status===202&&(this.messageService.add({severity:"success",summary:"Exito",detail:"Contrase\xF1a actualizada"}),setTimeout(()=>{this.router.navigate(["/inicio"])},1e3))})})}};i.\u0275fac=function(o){return new(o||i)(_(P),_(N),_(R),_(T))},i.\u0275cmp=E({type:i,selectors:[["app-recuperar-pass"]],decls:4,vars:2,consts:[[1,"flex","justify-center","my-10"],["class","bg-white rounded-lg p-10 md:w-2/6",4,"ngIf"],[1,"bg-white","rounded-lg","p-10","md:w-2/6"],[1,"text-3xl","mb-4"],[3,"styles","dataForm","datosForm"],[1,"mt-3"],["routerLink","/login","styleClass","px-4 py-2 mr-2 bg-red-400 hover:bg-red-500","label","Cancelar"],["styleClass","px-4 py-2 bg-pink-300 hover:bg-pink-400","label","Recuperar contrase\xF1a",3,"disabled","click",4,"ngIf"],["type","submit","styleClass","px-4 py-2 bg-pink-300 hover:bg-pink-400","label","Verificando correo...",4,"ngIf"],["styleClass","px-4 py-2 bg-pink-300 hover:bg-pink-400","label","Recuperar contrase\xF1a",3,"disabled","click"],["type","submit","styleClass","px-4 py-2 bg-pink-300 hover:bg-pink-400","label","Verificando correo..."],[4,"ngIf"],[1,"text-2xl","mb-4"],[1,"flex","gap-5"],["pButton","","type","button","value","Correo electronico",1,"rounded-md","bg-blue-600",3,"click"],["pButton","","type","button","value","Pregunta secreta",1,"rounded-md","bg-yellow-500",3,"click"],[3,"styles","dataForm","datosForm",4,"ngIf"],["class","mt-3",4,"ngIf"],["type","submit","styleClass","px-4 py-2 bg-pink-300 hover:bg-pink-400","label","Verificar",3,"disabled","click"],[3,"dataForm","datosForm","click",4,"ngIf"],["pButton","","label","Checar","class","mt-2",3,"disabled","click",4,"ngIf"],[3,"dataForm","datosForm","click"],["pButton","","label","Checar",1,"mt-2",3,"disabled","click"],["styleClass","px-4 py-2 bg-pink-300 hover:bg-pink-400","label","Actualizar contrase\xF1a",3,"disabled","click"]],template:function(o,a){o&1&&(s(0,"div",0),v(1,"p-toast"),f(2,It,8,5,"div",1)(3,Dt,3,2,"div",1),n()),o&2&&(l(2),c("ngIf",!a.validStatus),l(),c("ngIf",a.validStatus))},dependencies:[k,V,L,pe,A,j]});let t=i;return t})();var jt=[{path:"login",component:Pe},{path:"crear-cuenta",component:Ae},{path:"recuperar-password",component:De}],je=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=F({type:i}),i.\u0275inj=S({imports:[Y.forChild(jt),Y]});let t=i;return t})();var Ii=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=F({type:i}),i.\u0275inj=S({imports:[B,je,Ie,be,Fe]});let t=i;return t})();export{Ii as a};
