<app-loader *ngIf="isLoader"></app-loader>
<div class="flex justify-center" *ngIf="!isLoader">
  <div class="w-4/5 rounded-md my-5">
    <div class="flex justify-between items-center">
      <h2>Mis compras</h2>
      <div class="flex items-center gap-3">
        <label for="">Filtrar por</label>
        <select name="" id="" class="rounded-md border-none" [(ngModel)]="type" (ngModelChange)="filterData()">
          <option value="all">Todo</option>
          <option value="completo">Entregado</option>
          <option value="proceso">Pendientes de entrega</option>
          <option value="Fenvio">Pendientes de envio</option>
        </select>
      </div>
    </div>


    <div class="bg-white rounded-md mb-5" *ngFor="let item of filterVenta">
      <div class="pt-1 pb-2">
        <div class="flex items-center justify-between px-5">
          <p class="px-4">{{item.fecha_venta}}</p>
          <div *ngIf="item.envio !== null">
            <a class="bg-gray-600 hover:bg-gray-500 py-2 px-3 rounded-md"
              target="_blank"
              href="https://www.fedex.com/fedextrack/?trknbr={{item.envio.numero_guia}}">Seguir envio</a>
          </div>

        </div>
        <hr class="opacity-50">
        <div class="px-8 flex items-center justify-between mb-5" *ngFor="let product of item.detallesVenta">
          <div class="flex items-center gap-5">
            <img class="w-36 h-44" [src]="product.producto.imagen[0].url_imagen" alt="imagen">
            <div class="">
              <p class="text-xl p-0 m-0">{{product.producto.nombre_producto}}</p>
              <p *ngIf="item.envio !== null && item.envio.fecha_entrega !== null" class="text-md text-gray-600">
                Entregado {{item.envio.fecha_entrega}}</p>
              <p *ngIf="item.envio !== null" class="text-sm text-gray-600">Codigo de rastreo <span
                  class="text-blue-300">{{item.envio.numero_guia}}</span></p>
              <p *ngIf="item.envio !== null && item.estado === 'completo'" class="text-green-500 text-sm">Entregado</p>
              <p *ngIf="item.estado === 'Fenvio'" class="text-pink-300 text-sm">Estamos preparando tu pedido</p>
              <p *ngIf="item.estado === 'proceso'" class="text-yellow-500 text-sm">Despachamos tu pedido</p>
            </div>
          </div>

        </div>
      </div>
    </div>


  </div>
</div>
